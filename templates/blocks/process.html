<!-- Process/How It Works Tabs Block -->
<section class="process-tabs-block">
    {% if data.title %}
    <h2>{{ data.title }}</h2>
    {% endif %}

    {% if data.subtitle %}
    <p class="process-subtitle">{{ data.subtitle }}</p>
    {% endif %}

    {% if data.steps %}
    <div class="process-tabs">
        <div class="tabs-nav">
            {% for step in data.steps %}
            <button class="tab-btn {% if loop.first %}active{% endif %}" data-tab="{{ loop.index }}">
                <span class="tab-num">{{ loop.index }}</span>
                <span class="tab-label">{{ step.title }}</span>
            </button>
            {% endfor %}
        </div>
        <div class="tabs-content">
            {% for step in data.steps %}
            <div class="tab-panel {% if loop.first %}active{% endif %}" data-panel="{{ loop.index }}">
                <div class="tab-panel-inner">
                    {% if step.icon %}
                    <div class="tab-icon">{{ step.icon }}</div>
                    {% endif %}
                    <h3>{{ step.title }}</h3>
                    <p>{{ step.description }}</p>
                    {% if step.details %}
                    <ul class="tab-details">
                        {% for detail in step.details %}
                        <li>{{ detail }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</section>

<style>
.process-tabs-block {
    padding: var(--space-2xl) 0;
}

.process-tabs-block h2 {
    margin-bottom: var(--space-sm);
}

.process-subtitle {
    color: var(--text-muted);
    margin-bottom: var(--space-xl);
}

.process-tabs {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    overflow: hidden;
}

.tabs-nav {
    display: flex;
    border-bottom: 1px solid var(--border);
    overflow-x: auto;
    scrollbar-width: none;
}

.tabs-nav::-webkit-scrollbar {
    display: none;
}

.tab-btn {
    flex: 1;
    min-width: 120px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: var(--space-md) var(--space-lg);
    background: transparent;
    border: none;
    border-bottom: 2px solid transparent;
    color: var(--text-muted);
    font-family: var(--font-mono);
    font-size: var(--font-size-ui);
    cursor: pointer;
    transition: var(--transition);
}

.tab-btn:hover {
    background: var(--bg-input);
    color: var(--text-secondary);
}

.tab-btn.active {
    color: var(--accent);
    border-bottom-color: var(--accent);
    background: var(--bg-input);
}

.tab-num {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    background: var(--bg-tertiary);
    border-radius: 50%;
    font-weight: 600;
    font-size: var(--font-size-ui);
}

.tab-btn.active .tab-num {
    background: var(--accent);
    color: white;
}

.tab-label {
    font-weight: 500;
    white-space: nowrap;
}

.tabs-content {
    padding: var(--space-xl);
}

.tab-panel {
    display: none;
}

.tab-panel.active {
    display: block;
}

.tab-panel-inner {
    max-width: calc(600px * var(--scale));
}

.tab-icon {
    font-size: var(--font-size-display);
    margin-bottom: var(--space-md);
}

.tab-panel h3 {
    color: var(--text-primary);
    margin-bottom: var(--space-sm);
}

.tab-panel p {
    color: var(--text-secondary);
    line-height: 1.7;
    margin-bottom: var(--space-md);
}

.tab-details {
    list-style: none;
    padding: 0;
}

.tab-details li {
    display: flex;
    align-items: flex-start;
    gap: var(--space-sm);
    padding: var(--space-sm) 0;
    color: var(--text-secondary);
    font-size: var(--font-size-ui);
}

.tab-details li::before {
    content: "â†’";
    color: var(--accent);
    font-weight: bold;
}

@media (max-width: 768px) {
    .tabs-nav {
        flex-wrap: nowrap;
    }

    .tab-btn {
        min-width: 100px;
        padding: var(--space-sm) var(--space-md);
    }

    .tab-label {
        font-size: var(--font-size-caption);
    }
}
</style>

<script>
(function() {
    const block = document.querySelector('.process-tabs-block');
    if (!block) return;

    const tabs = block.querySelectorAll('.tab-btn');
    const panels = block.querySelectorAll('.tab-panel');

    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            const tabNum = tab.dataset.tab;

            tabs.forEach(t => t.classList.remove('active'));
            panels.forEach(p => p.classList.remove('active'));

            tab.classList.add('active');
            block.querySelector(`[data-panel="${tabNum}"]`).classList.add('active');
        });
    });
})();
</script>
