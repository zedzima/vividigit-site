<!-- Features Block: Alternating image/text sections -->
<section class="features-block">
    {% if data.title %}
    <div class="features-header text-center">
        <span class="tag tag-accent">{{ data.tag | default(block_type) }}</span>
        <h2>{{ data.title }}</h2>
        {% if data.subtitle %}<p>{{ data.subtitle }}</p>{% endif %}
    </div>
    {% endif %}

    <div class="features-list">
        {% for feature in data.features %}
        <div class="feature-item {% if loop.index is odd %}feature-normal{% else %}feature-reversed{% endif %}">
            <div class="feature-content">
                {% if feature.icon %}
                <span class="feature-icon">{% if feature.icon | length > 2 %}{{ icon(feature.icon, 32) }}{% else %}{{ feature.icon }}{% endif %}</span>
                {% endif %}
                {% if feature.tag %}
                <span class="tag">{{ feature.tag }}</span>
                {% endif %}
                <h3>{{ feature.title }}</h3>
                <div class="feature-text">{{ feature.text | safe }}</div>
                {% if feature.list %}
                <ul class="feature-list">
                    {% for item in feature.list %}
                    <li>
                        <span class="feature-check">+</span>
                        {{ item }}
                    </li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>
            <div class="feature-visual">
                {% if feature.image %}
                <img src="{{ feature.image }}" alt="{{ feature.title }}" loading="lazy">
                {% elif feature.code %}
                <pre><code>{{ feature.code }}</code></pre>
                {% else %}
                <div class="feature-visual-placeholder">
                    <span class="feature-visual-icon">{% if feature.icon and feature.icon | length > 2 %}{{ icon(feature.icon, 64, true) }}{% else %}{{ feature.icon | default('*') }}{% endif %}</span>
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>

    {% if data.button_label %}
    <div class="features-footer text-center">
        <a href="{{ (data.button_url | default('#')).lstrip('/') }}" class="btn btn-primary">
            {{ data.button_label }}
        </a>
    </div>
    {% endif %}
</section>
